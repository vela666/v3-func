"use strict";(self["webpackChunkvue3_app"]=self["webpackChunkvue3_app"]||[]).push([[861],{5667:function(e,a,t){t.r(a),t.d(a,{default:function(){return Z}});t(7658);var l=t(8222),i=t(3171);const n=e=>((0,l.dD)("data-v-8ee9848a"),e=e(),(0,l.Cn)(),e),s=n((()=>(0,l._)("p",null,"前端分页-跨页选择保留-form表单动态验证",-1))),c={class:"drawer-content"},r={class:"drawer-content-t"},d={class:"drawer-content-c"},o={class:"drawer-content-c-l"},u={class:"tips"},p={class:"drawer-content-c-c"},m={key:1,style:{"font-size":"16px"}},g={class:"drawer-content-c-r"},f={class:"desc"},_={style:{color:"#5473e8"}},h={class:"select-list-name"},w={class:"tips"},v=["data-id"],k={class:"name-input"},b=n((()=>(0,l._)("span",null,"模板名称：",-1))),D={class:"drawer-content-b"},y={key:1,class:"no-select","element-loading-text":"获取数据中..."};var j={__name:"SelectAcrossPages2",setup(e){const a=(0,l.RC)((()=>t.e(960).then(t.bind(t,2960)))),n=(0,l.iH)([{project_id:"42e263dc13814915918a9b4360d847c78",project_name:"002",apply_list:[],product_list:[],user_list:[{user_id:"5fd931f3cd484b58a034458a97cc4c6c8",user_name:"周紫薇"}],is_manger:!0,audit_material:0,folder_auth:!0}]),j=()=>{const e=[];for(let a=0;a<200;a++)e.push({status:`status${a}`,name:`name${a}`,site_id:`site_id${a}`,thumbnail:"https://sf1-ttcdn-tos.pstatp.com/obj/oneshot/2022102411412855331d065a1670434b02"});return{isSlowReq:!0,loading:!1,previewData:{src:"",name:""},checkAll:!1,checkedLists:[],search:"",advertiser_id:"111111",dataList:e,listData:(0,l.Fl)((()=>{let e=U.dataList.filter((e=>e.name.includes(U.search))),a=(U.pageConfig.page-1)*U.pageConfig.page_size;return e=e.slice(a,U.pageConfig.page*U.pageConfig.page_size),e})),pageConfig:{page:1,page_size:15},total:e.length,formRef:null}},U=(0,l.qj)(j());const L=(0,l.iH)({showSelecte:[]}),Z=()=>{L.value.showSelecte.push(...U.listData.filter((e=>(e.advertiser_id=U.advertiser_id,e.name_alias=e.name,e.project_id=n.value[0]?.project_id??"",U.checkedLists.includes(e.site_id))))),L.value.showSelecte=(0,i.Z)(L.value.showSelecte,"site_id").filter((e=>U.checkedLists.includes(e.site_id))),console.log(L.value),V()};(0,l.YP)((()=>U.listData),Z),(0,l.YP)((()=>U.checkedLists),Z,{deep:!0});const C=e=>{e?(U.checkedLists.push(...U.listData.map((e=>e.site_id))),U.checkedLists=[...new Set(U.checkedLists)]):U.checkedLists=U.checkedLists.filter((e=>!U.listData.some((a=>+a.site_id===+e))))},V=()=>{U.checkAll=U.listData.every((e=>U.checkedLists.includes(e.site_id)))},W=()=>{U.checkedLists=[]},S=(e=!0)=>{Object.assign(U,j())},z=()=>{U.formRef.validate((async e=>{if(!e)return;let a=L.value.showSelecte.map((e=>({project_id:e.project_id,name_alias:e.name,...e})));console.log(a)}))},x=e=>{let{thumbnail:a,name:t,clear:l,id:i}=e.dataset;l?U.checkedLists=U.checkedLists.filter((e=>e!==i)):(U.previewData.src=a,U.previewData.name=t)};return(e,t)=>{const i=(0,l.up)("el-input"),j=(0,l.up)("el-checkbox"),Z=(0,l.up)("el-button"),V=(0,l.up)("el-checkbox-group"),H=(0,l.up)("el-option"),Y=(0,l.up)("el-select"),q=(0,l.up)("el-form-item"),A=(0,l.up)("el-form"),R=(0,l.up)("Pagination2"),$=(0,l.Q2)("showTips"),P=(0,l.Q2)("eventDelegation"),K=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)(l.HY,null,[s,(0,l._)("div",c,[(0,l._)("div",r,[(0,l.Wm)(i,{modelValue:U.search,"onUpdate:modelValue":t[0]||(t[0]=e=>U.search=e),class:"w220 mr20",placeholder:"请输入落地页名称"},null,8,["modelValue"])]),U.listData.length||U.checkedLists.length?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",d,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",o,[U.listData.length?((0,l.wg)(),(0,l.j4)(j,{key:0,modelValue:U.checkAll,"onUpdate:modelValue":t[1]||(t[1]=e=>U.checkAll=e),onChange:C},{default:(0,l.w5)((()=>[(0,l.Uk)("全选 ")])),_:1},8,["modelValue"])):(0,l.kq)("",!0),(0,l.Wm)(V,{modelValue:U.checkedLists,"onUpdate:modelValue":t[2]||(t[2]=e=>U.checkedLists=e)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(U.listData,(e=>((0,l.wg)(),(0,l.j4)(j,{key:e.site_id,label:e.site_id},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.iD)("span",u,[(0,l.Uk)((0,l.zw)(e.name),1)])),[[$]]),(0,l.Wm)(Z,{"data-name":e.name,"data-thumbnail":e.thumbnail,class:"preview",text:""},{default:(0,l.w5)((()=>[(0,l.Uk)("预览 ")])),_:2},1032,["data-name","data-thumbnail"])])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),[[P,{fn:x,target:".preview"}]]),(0,l._)("div",p,[U.previewData.name?((0,l.wg)(),(0,l.j4)((0,l.SU)(a),{key:0,data:U.previewData,isNoMask:!0},null,8,["data"])):((0,l.wg)(),(0,l.iD)("span",m,"落地页预览区"))]),(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",g,[(0,l.wy)((0,l._)("div",f,[(0,l._)("span",null,[(0,l.Uk)("已选 "),(0,l._)("i",_,(0,l.zw)(U.checkedLists.length),1),(0,l.Uk)(" 个落地页")]),(0,l.Wm)(Z,{text:"",onClick:W},{default:(0,l.w5)((()=>[(0,l.Uk)("清空")])),_:1})],512),[[l.F8,U.checkedLists.length]]),(0,l.Wm)(A,{ref:"formRef",model:L.value,class:"demo-dynamic","label-width":"100px"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(L.value.showSelecte,((e,a)=>((0,l.wg)(),(0,l.iD)("div",{key:e.site_id,class:"select-list"},[(0,l._)("div",h,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("span",w,[(0,l.Uk)((0,l.zw)(e.name),1)])),[[$]]),(0,l.Wm)(Z,{"data-name":e.name,"data-thumbnail":e.thumbnail,class:"preview",text:""},{default:(0,l.w5)((()=>[(0,l.Uk)("预览 ")])),_:2},1032,["data-name","data-thumbnail"]),(0,l._)("span",{"data-id":e.site_id,class:"close preview","data-clear":"true"},"X",8,v)]),(0,l.Wm)(q,{prop:`showSelecte.${a}.project_id`,rules:[{required:!0,message:"请选择项目",trigger:"change"}]},{default:(0,l.w5)((()=>[(0,l.Wm)(Y,{modelValue:e.project_id,"onUpdate:modelValue":a=>e.project_id=a,placeholder:"请选择项目"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.value,(e=>((0,l.wg)(),(0,l.j4)(H,{key:e.project_id,label:e.project_name,value:e.project_id},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"]),(0,l.Wm)(q,{prop:`showSelecte.${a}.name_alias`,rules:[{required:!0,message:"请输入模板名称",trigger:"blur"}]},{default:(0,l.w5)((()=>[(0,l._)("div",k,[b,(0,l.Wm)(i,{modelValue:e.name_alias,"onUpdate:modelValue":a=>e.name_alias=a,maxlength:"50",placeholder:"请输入模板名称","show-word-limit":""},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1032,["prop"])])))),128))])),_:1},8,["model"])])),[[P,{fn:x,target:".preview"}]])]),(0,l._)("div",D,[(0,l.Wm)(R,{limit:U.pageConfig.page_size,"onUpdate:limit":t[3]||(t[3]=e=>U.pageConfig.page_size=e),page:U.pageConfig.page,"onUpdate:page":t[4]||(t[4]=e=>U.pageConfig.page=e),total:U.total},null,8,["limit","page","total"]),(0,l._)("div",null,[(0,l.Wm)(Z,{class:"dialog-btn1",onClick:S},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1}),(0,l.Wm)(Z,{class:"dialog-btn1",type:"primary",onClick:z},{default:(0,l.w5)((()=>[(0,l.Uk)("保存")])),_:1})])])],64)):(0,l.wy)(((0,l.wg)(),(0,l.iD)("span",y,[(0,l.Uk)((0,l.zw)(U.loading?null:"暂无数据"),1)])),[[K,U.loading]])])],64)}}},U=t(3744);const L=(0,U.Z)(j,[["__scopeId","data-v-8ee9848a"]]);var Z=L},3171:function(e,a,t){t.d(a,{Z:function(){return P}});var l=t(1667),i=t(2674),n=1,s=2;function c(e,a,t,c){var r=t.length,d=r,o=!c;if(null==e)return!d;e=Object(e);while(r--){var u=t[r];if(o&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}while(++r<d){u=t[r];var p=u[0],m=e[p],g=u[1];if(o&&u[2]){if(void 0===m&&!(p in e))return!1}else{var f=new l.Z;if(c)var _=c(m,g,p,e,a,f);if(!(void 0===_?(0,i.Z)(g,m,n|s,c,f):_))return!1}}return!0}var r=c,d=t(7226);function o(e){return e===e&&!(0,d.Z)(e)}var u=o,p=t(4329);function m(e){var a=(0,p.Z)(e),t=a.length;while(t--){var l=a[t],i=e[l];a[t]=[l,i,u(i)]}return a}var g=m;function f(e,a){return function(t){return null!=t&&(t[e]===a&&(void 0!==a||e in Object(t)))}}var _=f;function h(e){var a=g(e);return 1==a.length&&a[0][2]?_(a[0][0],a[0][1]):function(t){return t===e||r(t,e,a)}}var w=h,v=t(6423),k=t(5993),b=t(9365),D=t(2281),y=1,j=2;function U(e,a){return(0,b.Z)(e)&&u(a)?_((0,D.Z)(e),a):function(t){var l=(0,v.Z)(t,e);return void 0===l&&l===a?(0,k.Z)(t,e):(0,i.Z)(a,l,y|j)}}var L=U,Z=t(9203),C=t(7771);function V(e){return function(a){return null==a?void 0:a[e]}}var W=V,S=t(3317);function z(e){return function(a){return(0,S.Z)(a,e)}}var x=z;function H(e){return(0,b.Z)(e)?W((0,D.Z)(e)):x(e)}var Y=H;function q(e){return"function"==typeof e?e:null==e?Z.Z:"object"==typeof e?(0,C.Z)(e)?L(e[0],e[1]):w(e):Y(e)}var A=q,R=t(7900);function $(e,a){return e&&e.length?(0,R.Z)(e,A(a,2)):[]}var P=$}}]);
//# sourceMappingURL=SelectAcrossPages2.9e78510b.js.map