"use strict";(self["webpackChunkvue3_app"]=self["webpackChunkvue3_app"]||[]).push([[790],{885:function(e,r,t){t.r(r),t.d(r,{default:function(){return b}});t(7658);var a=t(8222),i=t(1348),o=t(8891),l=t(3171),n=JSON.parse('{"aT":[{"isAuthorized":false,"advertiser_role":2,"advertiser_id":"376-328-9813","advertiser_name":"","belong_project_id":"6d80b30794a440b89474af2d419666810","belong_project_name":"007 项目","belong_user_id":"","belong_user_name":""},{"isAuthorized":false,"advertiser_role":2,"advertiser_id":"144-477-7358","advertiser_name":"","belong_project_id":"c0580ac3edcf4faeb8c6c019b6b644bf1","belong_project_name":"FB 程序化","belong_user_id":"","belong_user_name":""},{"isAuthorized":false,"advertiser_role":2,"advertiser_id":"932-571-2929","advertiser_name":"test-mcc","belong_project_id":"c0580ac3edcf4faeb8c6c019b6b644bf1","belong_project_name":"FB 程序化","belong_user_id":"","belong_user_name":""},{"isAuthorized":false,"advertiser_role":1,"advertiser_id":"430-796-4127","advertiser_name":"test-account","belong_project_id":"6d80b30794a440b89474af2d419666810","belong_project_name":"007 项目","belong_user_id":"0c3157b8f4064a28aac0c4bf462506515","belong_user_name":"C-普通员工"},{"isAuthorized":false,"advertiser_role":2,"advertiser_id":"759-168-3105","advertiser_name":"test123","belong_project_id":"c0580ac3edcf4faeb8c6c019b6b644bf1","belong_project_name":"FB 程序化","belong_user_id":"","belong_user_name":""},{"isAuthorized":false,"advertiser_role":2,"advertiser_id":"917-860-1650","advertiser_name":"test-m1001","belong_project_id":"6d80b30794a440b89474af2d419666810","belong_project_name":"007 项目","belong_user_id":"","belong_user_name":""},{"isAuthorized":false,"advertiser_role":1,"advertiser_id":"515-885-3427","advertiser_name":"11111","belong_project_id":"6d80b30794a440b89474af2d419666810","belong_project_name":"007 项目","belong_user_id":"","belong_user_name":""},{"isAuthorized":false,"advertiser_role":1,"advertiser_id":"739-263-1117","advertiser_name":"test-12345","belong_project_id":"6d80b30794a440b89474af2d419666810","belong_project_name":"007 项目","belong_user_id":"","belong_user_name":""},{"isAuthorized":false,"advertiser_role":1,"advertiser_id":"841-476-0433","advertiser_name":"04/Candy Charming GP","belong_project_id":"6d80b30794a440b89474af2d419666810","belong_project_name":"007 项目","belong_user_id":"","belong_user_name":""},{"isAuthorized":false,"advertiser_role":1,"advertiser_id":"422-110-2645","advertiser_name":"Candy Charming iOS","belong_project_id":"6d80b30794a440b89474af2d419666810","belong_project_name":"007 项目","belong_user_id":"","belong_user_name":""},{"isAuthorized":false,"advertiser_role":1,"advertiser_id":"121-036-0900","advertiser_name":"testAccount","belong_project_id":"6d80b30794a440b89474af2d419666810","belong_project_name":"007 项目","belong_user_id":"","belong_user_name":""},{"isAuthorized":false,"advertiser_role":2,"advertiser_id":"133-571-6339","advertiser_name":"方投广告投放系统 - MCC 经理账号","belong_project_id":"c0580ac3edcf4faeb8c6c019b6b644bf1","belong_project_name":"FB 程序化","belong_user_id":"","belong_user_name":""},{"isAuthorized":false,"advertiser_role":2,"advertiser_id":"799-908-3291","advertiser_name":"开发测试经理账号MCC","belong_project_id":"6d80b30794a440b89474af2d419666810","belong_project_name":"007 项目","belong_user_id":"","belong_user_name":""},{"isAuthorized":false,"advertiser_role":1,"advertiser_id":"785-752-3262","advertiser_name":"子MCC下的广告账户","belong_project_id":"146d9d7026c043ecb0e224f6fd77bed80","belong_project_name":"008 项目","belong_user_id":"5980680e307b4329a8907f598c5124925","belong_user_name":"A-普通员工"},{"isAuthorized":false,"advertiser_role":2,"advertiser_id":"669-492-4456","advertiser_name":"MCC下的子MCC账户","belong_project_id":"6d80b30794a440b89474af2d419666810","belong_project_name":"007 项目","belong_user_id":"","belong_user_name":""},{"isAuthorized":false,"advertiser_role":1,"advertiser_id":"241-038-5766","advertiser_name":"MCC下的广告账户","belong_project_id":"6d80b30794a440b89474af2d419666810","belong_project_name":"007 项目","belong_user_id":"","belong_user_name":""}]}');const d={class:"flex-center"},s={name:"AuthorizationDialog"};var _=Object.assign(s,{props:{radioDefaultType:{type:[String,Number],default:1}},emits:["getData"],setup(e,{emit:r}){const t=e,s=()=>({radioType:t.radioDefaultType,search:"",isAuthorized:!1,tableLoading:!1,dialogVisible:!1,authorizationList:[],selectedLists:[],code:""}),_=(0,a.qj)(s()),u=(0,a.iH)(null),c=(0,a.Fl)((()=>{let e=_.search.trim(),r=_.authorizationList.filter((e=>+e.advertiser_role===+_.radioType));return r=r.filter((e=>!_.isAuthorized||!e.isAuthorized)),e?r.filter((r=>r.advertiser_name.toLowerCase().includes(e.toLowerCase())||r.advertiser_id.includes(e))):(console.log(r),r)})),b=(0,a.Fl)((()=>{let e=_.authorizationList.filter((e=>+e.advertiser_role===+_.radioType));return e.length})),f=[{id:1,label:"广告账户"},{id:2,label:"经理账户"}],g=[{prop:"advertiser_name",label:"账户名称"},{prop:"advertiser_id",label:"账户ID"},{prop:"belong_project_name",label:"账户已归属项目"},{prop:"belong_user_name",label:"账户已归属人员"}];let v=null;(0,a.YP)([()=>_.search,()=>_.radioType,()=>_.isAuthorized],(0,o.Z)((e=>{(0,a.Y3)((()=>{let e=_.selectedLists.filter((e=>+e.advertiser_role===+_.radioType)),r=_.authorizationList.filter((e=>e.isAuthorized)),t=(0,l.Z)([...e,...r],"newId");t.forEach((e=>{u.value.toggleRowSelection(e,!0)}))}))}),300));const p=async e=>{try{_.tableLoading=!0;let e=n.aT;if(!Object.keys(e).length)return v&&v.close(),v=i.z8.warning("没有可选择的数据"),void history.replaceState(history.state,"",location.origin+location.pathname);_.authorizationList=Array.isArray(e)?e.map((e=>({...e,newId:e.advertiser_id+"&"+e.advertiser_role}))).sort(((e,r)=>e.isAuthorized-r.isAuthorized)):[],_.dialogVisible=!0,(0,a.Y3)((()=>{let e=_.authorizationList.filter((e=>e.isAuthorized));e.forEach((e=>{u.value.toggleRowSelection(e,!0)}))}))}catch(r){console.log(r)}finally{_.tableLoading=!1}},m=e=>{e.filter((e=>!e.isAuthorized)).length||(_.selectedLists=_.selectedLists.filter((e=>+_.radioType!==+e.advertiser_role))),_.selectedLists.push(...e),_.selectedLists=(0,l.Z)(_.selectedLists,"newId")},h=(e,r)=>{let t=e.some((e=>e.advertiser_id===r.advertiser_id));t?_.selectedLists.push(r):_.selectedLists=_.selectedLists.filter((e=>e.advertiser_id!==r.advertiser_id)),_.selectedLists=(0,l.Z)(_.selectedLists,"newId")},j=e=>!e.isAuthorized;let z=!0;const w=async()=>{if(!z)return;let e=(0,l.Z)([..._.selectedLists,...u.value.store.states.selection.value],"newId");e.length?console.log(e):i.z8.warning("请选择账户")};return p(),(e,r)=>{const t=(0,a.up)("el-radio-button"),i=(0,a.up)("el-radio-group"),o=(0,a.up)("el-input"),l=(0,a.up)("el-checkbox"),n=(0,a.up)("el-table-column"),s=(0,a.up)("el-table"),v=(0,a.up)("el-button"),p=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",d,[(0,a.Wm)(i,{modelValue:_.radioType,"onUpdate:modelValue":r[0]||(r[0]=e=>_.radioType=e)},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(f,(e=>(0,a.Wm)(t,{key:e,label:e.id},{default:(0,a.w5)((()=>[(0,a.Uk)((0,a.zw)(e.label),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"]),(0,a.Uk)(" 当前数据数量-"+(0,a.zw)((0,a.SU)(b))+" ",1),(0,a.Wm)(o,{class:"w220 mlr20",clearable:"",placeholder:"按账户名称/ID搜索",modelValue:_.search,"onUpdate:modelValue":r[1]||(r[1]=e=>_.search=e)},null,8,["modelValue"]),(0,a.Wm)(l,{modelValue:_.isAuthorized,"onUpdate:modelValue":r[2]||(r[2]=e=>_.isAuthorized=e)},{default:(0,a.w5)((()=>[(0,a.Uk)("仅显示可选择数据")])),_:1},8,["modelValue"])]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(s,{class:"mt20",ref_key:"tableRef",ref:u,data:(0,a.SU)(c),"tooltip-effect":"light",border:"",height:"100%",style:{width:"100%"},onSelectAll:m,onSelect:h},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{selectable:j,label:"全选",type:"selection",width:"90"}),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(g,(e=>(0,a.Wm)(n,{key:e.prop,label:e.label,"show-overflow-tooltip":""},{default:(0,a.w5)((({row:r})=>[(0,a.Uk)((0,a.zw)(r[e.prop]||"--"),1)])),_:2},1032,["label"]))),64))])),_:1},8,["data"])),[[p,_.tableLoading]]),(0,a.Wm)(v,{onClick:w},{default:(0,a.w5)((()=>[(0,a.Uk)("提交")])),_:1})],64)}}}),u=t(3744);const c=(0,u.Z)(_,[["__scopeId","data-v-a89eba62"]]);var b=c},3171:function(e,r,t){t.d(r,{Z:function(){return B}});var a=t(1667),i=t(2674),o=1,l=2;function n(e,r,t,n){var d=t.length,s=d,_=!n;if(null==e)return!s;e=Object(e);while(d--){var u=t[d];if(_&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}while(++d<s){u=t[d];var c=u[0],b=e[c],f=u[1];if(_&&u[2]){if(void 0===b&&!(c in e))return!1}else{var g=new a.Z;if(n)var v=n(b,f,c,e,r,g);if(!(void 0===v?(0,i.Z)(f,b,o|l,n,g):v))return!1}}return!0}var d=n,s=t(7226);function _(e){return e===e&&!(0,s.Z)(e)}var u=_,c=t(4329);function b(e){var r=(0,c.Z)(e),t=r.length;while(t--){var a=r[t],i=e[a];r[t]=[a,i,u(i)]}return r}var f=b;function g(e,r){return function(t){return null!=t&&(t[e]===r&&(void 0!==r||e in Object(t)))}}var v=g;function p(e){var r=f(e);return 1==r.length&&r[0][2]?v(r[0][0],r[0][1]):function(t){return t===e||d(t,e,r)}}var m=p,h=t(6423),j=t(5993),z=t(9365),w=t(2281),A=1,y=2;function L(e,r){return(0,z.Z)(e)&&u(r)?v((0,w.Z)(e),r):function(t){var a=(0,h.Z)(t,e);return void 0===a&&a===r?(0,j.Z)(t,e):(0,i.Z)(r,a,A|y)}}var C=L,Z=t(9203),k=t(7771);function T(e){return function(r){return null==r?void 0:r[e]}}var V=T,S=t(3317);function U(e){return function(r){return(0,S.Z)(r,e)}}var D=U;function I(e){return(0,z.Z)(e)?V((0,w.Z)(e)):D(e)}var W=I;function F(e){return"function"==typeof e?e:null==e?Z.Z:"object"==typeof e?(0,k.Z)(e)?C(e[0],e[1]):m(e):W(e)}var M=F,O=t(7900);function Y(e,r){return e&&e.length?(0,O.Z)(e,M(r,2)):[]}var B=Y}}]);
//# sourceMappingURL=SelectAcrossPages1.b72c30c2.js.map